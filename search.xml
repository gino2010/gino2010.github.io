<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Distributed Lock]]></title>
    <url>%2F2018%2F10%2F22%2Fdistributed-lock%2F</url>
    <content type="text"><![CDATA[åˆ†å¸ƒå¼é”ï¼Œåœ¨å¾®æœåŠ¡ï¼Œå¤šæœåŠ¡å™¨æ°´å¹³æ‰©å±•ä»¥åŠé«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œè¦ä¿è¯å…±äº«èµ„æºæ­£ç¡®å¤„ç†ï¼Œè¿™ä¸ªé”å¾ˆé‡è¦ã€‚æˆ‘äº†è§£åˆ°äº†ä¸‰ç§å®žçŽ°æ–¹å¼ï¼š æ•°æ®åº“æ–¹å¼ï¼ŒåŸºäºŽä¸»é”®å”¯ä¸€æ€§çº¦æŸæˆ–è¡Œçº§é”å®žçŽ° Zookeeperå®žçŽ°ï¼ŒåŸºäºŽå…¶ä¸´æ—¶æœ‰åºèŠ‚ç‚¹å®žçŽ° Redisæ–¹å¼ï¼ŒåŸºäºŽsetNXæ“ä½œå®žçŽ° ä¸‰ç§æ–¹å¼å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œåœ¨æ¢å¤æ­¤åšå®¢ä¹‹å‰æˆ‘å·²ç»å®žçŽ°äº†åŸºäºŽRedisç‰ˆæœ¬çš„åˆ†å¸ƒå¼é”ï¼ŒçŽ°åœ¨æŠŠå¦å¤–ä¸¤ç§åŠ ä»¥å®žçŽ°ï¼Œå¹¶åšç›¸åº”çš„å¯¹æ¯”ã€‚ Mysqlæ•°æ®åº“æ–¹å¼å®žçŽ°åˆ†å¸ƒå¼é”ï¼Œä¸»è¦ç”¨ä¸‰ç§å½¢å¼ï¼š ä¹è§‚é”ï¼Œversionï¼Œé€šè¿‡whereæ¡ä»¶ä¸­çš„versionå†³å®šæ˜¯å¦å¯ä»¥æ›´æ–°æˆåŠŸï¼Œä»Žè€ŒèŽ·å¾—é” ä¸»é”®å”¯ä¸€çº¦æŸæ–¹å¼ï¼Œæ˜¯å¦å¯ä»¥æ­£å¸¸å†™å…¥æ•°æ®ï¼Œä»Žè€ŒèŽ·å¾—é” æ•°æ®åº“è‡ªèº«é” for update æ¥å†³å®šæ˜¯å¦å¯ä»¥èŽ·å¾—é” è¿™é‡Œæˆ‘ä»¬ä¸è®¨è®ºä¹è§‚é”ï¼Œä¸ºäº†å’Œzookeeperã€redisçš„é”åšå¯¹æ¯”ï¼Œè¿™é‡Œé‡‡ç”¨ä½¿ç”¨ä¸»é”®å”¯ä¸€çº¦æŸæ–¹å¼å®žçŽ°é”ã€‚ åˆ›å»ºé”è¡¨ï¼Œå…¶ä¸­method_nameéœ€è¦ç´¢å¼•å¹¶å”¯ä¸€ï¼Œæ—¶é—´é»˜è®¤1234567CREATE TABLE method_lock( id int PRIMARY KEY NOT NULL AUTO_INCREMENT, method_name varchar(64) NOT NULL, update_time timestamp not null default current_timestamp on update current_timestamp);CREATE UNIQUE INDEX method_lock_method_name_uindex ON method_lock (method_name); å…³é—­è‡ªåŠ¨æäº¤ï¼Œå¼€å§‹æ‰‹åŠ¨æäº¤ï¼Œä¿è¯äº‹åŠ¡ä¸­çš„æ“ä½œåŽŸå­æ€§1connection.setAutoCommit(false); èŽ·å¾—é”ï¼Œä¸¤ä¸ªæ“ä½œï¼Œåˆ é™¤è¶…æ—¶çš„é”ï¼ˆè¶…æ—¶è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶ï¼‰ï¼Œæ’å…¥æ•°æ®èŽ·å¾—é”123456789PreparedStatement preparedDelete = MySQLConfig.connection.prepareStatement(clearSQL);preparedDelete.setString(1, name);preparedDelete.setInt(2, 3);preparedDelete.executeUpdate();PreparedStatement preparedInsert = MySQLConfig.connection.prepareStatement(insertSQL);preparedInsert.setString(1, name);MySQLConfig.connection.commit(); å¦‚æžœæäº¤å¤±è´¥ï¼Œè¿›è¡Œé‡è¯•ï¼Œè®¾å®šæ—¶é—´é—´éš”å’Œé‡è¯•æ¬¡æ•°1public static boolean getLockTimes(String name, int times, int interval) é‡Šæ”¾é”ï¼Œç›´æŽ¥åˆ é™¤é”å æœ‰çš„è®°å½•1234PreparedStatement preparedDelete = MySQLConfig.connection.prepareStatement(deleteSQL);preparedDelete.setString(1, name);preparedDelete.executeUpdate();MySQLConfig.connection.commit(); Zookeeperä¸é‡å¤é€ è½®å­äº†ï¼Œè½®å­åŽŸç†ç®€å•è¯´ä¸€ä¸‹å§ï¼Œä¸¤ç§å®žçŽ°æ–¹å¼ï¼š å›ºå®šèŠ‚ç‚¹ï¼Œåˆ©ç”¨æ–‡ä»¶åç§°å”¯ä¸€æ€§ï¼Œè°å¯ä»¥åˆ›å»ºcreateæŒ‡ä»¤è¯¥èŠ‚ç‚¹ï¼Œè°å°±èŽ·å¾—é”ï¼Œç±»ä¼¼redisä¸­çš„èŽ·å–é”æ“ä½œï¼Œåˆ é™¤èŠ‚ç‚¹é‡Šæ”¾é”ï¼Œå…¶å®ƒwatchè¯¥èŠ‚ç‚¹ åˆ©ç”¨zookeeperä¸­ä¸´æ—¶æœ‰åºèŠ‚ç‚¹ï¼Œå°è¯•èŽ·å¾—é”ï¼Œå¦‚æžœå½“å‰çº¿ç¨‹ç”³è¯·åˆ°çš„èŠ‚ç‚¹åºå·ä¸ºæœ€å°ï¼Œåˆ™èŽ·å¾—é”ï¼Œå¦åˆ™ç›‘å¬å‰ä¸€ä¸ªåºå·ç­‰å¾…çŠ¶æ€æ”¹å˜ï¼Œç„¶åŽå†æ¬¡åˆ¤æ–­ã€‚ å»ºè®®å¤§å®¶ï¼Œå¦‚æžœæœ‰è½®å­å°±ä¸è¦è‡ªå·±é€ äº†ï¼Œå› ä¸ºç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€ çš„ä¸å¦‚å·²æœ‰çš„è½®å­ã€‚æ‰€ä»¥ï¼Œå®žéªŒä½¿ç”¨æˆç†Ÿçš„CuratorFrameworkï¼Œåˆ›å»ºInterProcessMutexé”å¯¹è±¡ é€šè¿‡acquireå°è¯•èŽ·å¾—é”ï¼Œå…¶ä¸­3sä¸ºå¯ä»¥æŽ¥å—çš„å°è¯•èŽ·å¾—é”çš„æ—¶é—´ï¼Œå¦‚æžœå¤ªçŸ­ï¼Œå¯èƒ½èµ„æºç«žäº‰æ¿€çƒˆå¯¼è‡´èŽ·å¾—ä¸åˆ°é”ï¼Œè€Œè¿”å›žfalseï¼Œæ‰€ä»¥è€ƒè™‘äº†é‡è¯•æœºåˆ¶ã€‚1mutex.acquire(3, TimeUnit.SECONDS); é‡Šæ”¾é”ï¼Œäº‹åŠ¡å¤„ç†å®Œæ¯•åŽï¼Œéœ€è¦é‡Šæ”¾é”ï¼Œæœ€å¥½åˆ¤æ–­ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯å½“å‰çº¿ç¨‹æ‹¥æœ‰è¿™ä¸ªé”ï¼Œç„¶åŽå°è¯•é‡Šæ”¾ã€‚1234if (mutex.isOwnedByCurrentThread()) &#123; mutex.release(); log.info("release lock....");&#125; å¦‚æžœæŒ‰ç…§ç½‘ä¸ŠåŽŸç†ä»‹ç»æ¥çœ‹ï¼Œå…¶åˆ¤æ–­æ˜¯è‡ªå¢žåºå·çš„æœ€å°å€¼ä¸ºèŽ·å¾—é”ï¼Œé‚£ä¹ˆå…¶åº”è¯¥æ˜¯æ˜¯ä¸€ä¸ªå…¬å¹³é”ï¼Œè¿™ä¸€ç‚¹æˆ‘éœ€è¦å†è¿›ä¸€æ­¥éªŒè¯ä¸€ä¸‹ã€‚ RedisRedisåˆ†å¸ƒå¼é”ï¼Œrediså®˜ç½‘æœ‰ç›¸åº”çš„æ–‡ç« é˜è¿°ï¼Œè¿™é‡Œç›¸å½“äºŽæ¨¡ä»¿ç€é€ äº†ä¸€ä¸ªè½®å­ é¦–å…ˆå®žçŽ°ä¸€ä¸ªrediså®žä¾‹å³å•èŠ‚ç‚¹çš„ä¾‹å­ï¼Œè¿™ä¸ªæ˜¯åŸºç¡€ã€‚é€šè¿‡å¤šçº¿ç¨‹æ–¹å¼æ¨¡æ‹Ÿæµ‹è¯•ï¼Œå®žé™…åº”ç”¨ä¸åº”è¯¥æ˜¯å¤šçº¿ç¨‹çŽ¯å¢ƒï¼Œå¦åˆ™ä½¿ç”¨çº¿ç¨‹åŒæ­¥ç›¸å…³æŠ€æœ¯å°±å¥½äº†ã€‚å…¶æ¬¡ï¼Œåˆæ­¥å®žçŽ°äº†RedLockæ–¹å¼ï¼Œç”¨äºŽå¤šä¸ªRedisèŠ‚ç‚¹ï¼Œå¢žå¼ºå…¶ç¨³å®šæ€§ã€‚ä½†å®žé™…ä½¿ç”¨å¯èƒ½è¿˜æ˜¯å•èŠ‚ç‚¹æ¯”è¾ƒå¤šï¼Œéœ€è¦è€ƒè™‘é”å¤±æ•ˆçš„å¼¥è¡¥æ–¹å¼ã€‚ è¿™é‡Œçš„setæ–¹æ³•æ˜¯å…³é”®ï¼Œå…¶ä¿è¯äº†åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä»¥åŠè®¾ç½®é”å€¼å’Œæœ‰æ•ˆæ—¶é—´ä¸€ç³»åˆ—æ“ä½œçš„åŽŸå­æ€§ï¼Œå¦åˆ™è¿™ä¸ªåˆ†å¸ƒå¼é”çš„å®žçŽ°æ˜¯ä¸æˆç«‹çš„ã€‚123456String res = resource.set(lockKey, uuid, "NX", "PX", keyExpire);if ("OK".equals(res)) &#123; resource.close(); log.info("Get lock, uuid: &#123;&#125;", uuid); return uuid;&#125; è®¾ç½®æˆåŠŸï¼Œåˆ™èŽ·å¾—é”ï¼Œå¦åˆ™å¤±è´¥ã€‚å…¶ä¸­è®¾ç½®çš„å€¼ä¸ºuuidéšæœºæ•°ï¼Œæ‰€ä»¥è¿™ä¸ªç†è®ºä¸Šæ˜¯éžå…¬å¹³é” é‡Šæ”¾é”ï¼Œå³åˆ é™¤å€¼ï¼Œè¿™æ˜¯éœ€è¦watchè¿™ä¸ªå€¼ï¼Œå¹¶åœ¨äº‹åŠ¡å†…å°†å…¶åˆ é™¤12345678910111213resource.watch(lockKey);if (uuid.equals(resource.get(lockKey))) &#123; Transaction multi = resource.multi(); Response&lt;Long&gt; del = multi.del(lockKey); multi.exec(); if (del.get() == 1) &#123; log.info("Release lock, uuid: &#123;&#125;", uuid); retFlag = true; &#125; else &#123; log.info("Release lock, failed!"); &#125; multi.close();&#125; å½“redisæœ‰å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¥‡æ•°ä¸ªç‚¹æ¥æŒ‰ç…§å¤šæ•°åŽŸåˆ™åˆ¤æ–­æ˜¯å¦èŽ·å¾—äº†é”ã€‚ç¨‹åºä¸­é€šè¿‡ä¸€ä¸ªredisä¸­çš„ä¸é€šDBæ¥æ¨¡æ‹Ÿçš„ã€‚æœ‰æ•ˆæ—¶é—´å†…ï¼ŒèŠ‚ç‚¹æ•°å¤§äºŽä¸€åŠï¼Œå°±è®¤ä¸ºèŽ·å¾—æˆåŠŸï¼Œå¦åˆ™å¤±è´¥12345678if ((passNode.get() &gt;= nodes / 2 + 1) &amp;&amp; (end - start) &lt; keyExpire) &#123; log.info("Get RedLock uuid &#123;&#125;, pass node:&#123;&#125;", uuid, passNode.get()); return uuid;&#125; else &#123; log.info("Get RedLock failed"); releaseLock(lockName, uuid); return null;&#125; æ€»ç»“æ— è®ºä»€ä¹ˆæ€Žæ ·å®žçŽ°åˆ†å¸ƒå¼é”ï¼Œéƒ½éœ€è¦è€ƒè™‘ä¸€ä¸‹å†…å®¹ï¼š åˆ¤æ–­é”æ˜¯å¦å­˜åœ¨å’Œè®¾ç½®é”å€¼ï¼Œä¸¤æ­¥éœ€è¦åŽŸå­æ€§ è€ƒè™‘ç”³è¯·é”æ—¶ï¼Œç”³è¯·çš„è¶…æ—¶æ—¶é—´å’Œå°è¯•æ¬¡æ•°ï¼Œå…·å¤‡éžé˜»å¡žç‰¹æ€§ éœ€è¦è€ƒè™‘é”çš„æ­£å¸¸é”€æ¯æ–¹å¼ï¼Œä¸»åŠ¨åˆ é™¤é” éœ€è¦è€ƒè™‘é”çš„å¼‚å¸¸é”€æ¯æ–¹å¼ï¼Œä¾‹å¦‚æœ‰æ•ˆæ—¶é—´æˆ–è€…å›žè¯æ–­å¼€åˆ é™¤ é€‚å½“è€ƒè™‘é‡å…¥ç‰¹æ€§ ä½¿ç”¨æ€»ç»“ï¼š mysql åˆ©ç”¨æ•°æ®åº“ç‰¹æ€§è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæ€§èƒ½æœ‰é™ zookeeperå®žçŽ°åº”è¯¥æ˜¯éžå¸¸ä¸¥è°¨çš„ï¼Œä½†æ˜¯æ€§èƒ½ä¸€èˆ¬ Redisè™½ç„¶å®žçŽ°ä¸Šè¿˜å­˜åœ¨äº‰è®®ï¼Œä½†æ˜¯æ€§èƒ½å¾ˆå¥½ æ€§èƒ½: ç¼“å­˜ &gt; Zookeeper &gt; æ•°æ®åº“å¯é æ€§: Zookeeper &gt; ç¼“å­˜ &gt; æ•°æ®åº“ å®žçŽ°å¤æ‚åº¦ï¼Œçœ‹ä½ å¯¹è°ç†Ÿæ‚‰äº†ï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰å¾—å·®ä¸å¤šã€‚]]></content>
      <categories>
        <category>tech</category>
      </categories>
      <tags>
        <tag>zookeeper</tag>
        <tag>mysql</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Zookeeper]]></title>
    <url>%2F2018%2F10%2F18%2Fzookeeper%2F</url>
    <content type="text"><![CDATA[è¿‘æœŸåœ¨åšMQçš„å®žéªŒï¼Œæ‰€ä»¥åˆæŽ¥è§¦äº†ä¸€ä¸‹Zookeeperï¼Œä¹‹æ‰€è¯´åˆæ˜¯å› ä¸ºä¹‹å‰ç¢°åˆ°è¿‡ï¼Œä½†æ˜¯åªæ˜¯ç”¨è€Œå·²æ²¡æœ‰äº†è§£è¿‡ä¸€äº›ç»†èŠ‚ã€‚ Zookeeper åšä»€ä¹ˆï¼Ÿå¼•ç”¨å®˜æ–¹åŽŸè¯ï¼šZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. ä»–å¯ä»¥æä¾›é«˜å¯é çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼ŒåŒ…æ‹¬ä¸­å¿ƒåŒ–é…ç½®æœåŠ¡ç­‰ã€‚ä¹‹å‰æˆ‘ç”¨å®ƒåšäº†ä»€ä¹ˆï¼Œæ³¨å†Œå‘çŽ°æœåŠ¡å™¨ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯ç”¨äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å…·ä½“æ€Žä¹ˆå®žçŽ°çš„ï¼ŒSpring Cloudéƒ½å·²ç»å®žçŽ°äº†ï¼Œæ²¡æœ‰æ·±å…¥å…³å¿ƒè¿‡ã€‚ è¿™ä¸ªæ–‡ç« æˆ‘ä»¬è¡¥ä¸€äº›å¿…è¦çš„çŸ¥è¯†ï¼Œæ›´åŠ æ·±å…¥çš„äº†è§£Zookeeperã€‚ Zookeeper æ€Žä¹ˆçŽ©ï¼Ÿé¦–å…ˆï¼Œç®€å•è¯´ä»–å¥½ä¼¼ä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å­˜å‚¨æ•°æ®çš„æœåŠ¡å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå¿½ç•¥å…¶é›†ç¾¤ä¸­çš„ä¸€äº›ç‰¹æ€§ï¼ˆé€‰ä¸¾åˆ¶åº¦ç­‰ï¼‰ï¼Œæˆ‘ä»¬çœ‹å®ƒå¯¹å¤–å¯ä»¥æä¾›ä»€ä¹ˆã€‚ å®ƒå†…éƒ¨æœ‰ç±»ä¼¼æ–‡ä»¶ç›®å½•çš„ç»“æž„ï¼ŒèŠ‚ç‚¹ç§°ä¹‹ä¸ºznode æ–‡ä»¶ç»“æž„å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œå¯ä»¥æƒ³è±¡ä¸ºç›®å½•ç»“æž„çš„Redis èŠ‚ç‚¹æ•°æ®å¤§å°æœ‰é™ï¼Œä¸å¯ä»¥è¶…è¿‡1M å¯ä»¥é€šè¿‡æŽ¥å£èŽ·å¾—æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç”¨å…¶åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„å…³é”® è¡¥å……ï¼Œæ•°æ®è¿‡å¤§æ€Žä¹ˆåŠžï¼Œç›®å‰äº†è§£åˆ°çš„æœ‰ä¸¤ä¸ªæ€è·¯ï¼Œæ²¡æœ‰å®žéªŒè¿‡ï¼š ä½¿ç”¨ä¸“ä¸šçš„åˆ†å¸ƒå¼å­˜å‚¨HDFSç­‰ ä½¿ç”¨Redisï¼Œç„¶åŽzookeeperè®°å½•ç´¢å¼•å°±å¥½äº† å‘½ä»¤è¡Œä¸¤ç§å½¢å¼ï¼Œåˆ†åˆ«å¯¹åº”æŸ¥çœ‹ç®¡ç† æœåŠ¡å™¨çŠ¶æ€å’Œå†…éƒ¨å­˜å‚¨ã€‚ æŸ¥çœ‹ç®¡ç†æœåŠ¡å™¨çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡telnet å’Œ ncå‘å‡ºæŒ‡ä»¤ï¼Œä¸€èˆ¬ä½¿ç”¨ncæ¯”è¾ƒæ–¹ä¾¿ï¼ˆå…·ä½“å‘½ä»¤å‚è€ƒç½‘ä¸Šä¿¡æ¯ï¼‰1234567891011echo stat| nc 127.0.0.1 2181 # æ¥æŸ¥çœ‹å“ªä¸ªèŠ‚ç‚¹è¢«é€‰æ‹©ä½œä¸ºfolloweræˆ–è€…leaderecho ruok| nc 127.0.0.1 2181 # æµ‹è¯•æ˜¯å¦å¯åŠ¨äº†è¯¥Serverï¼Œè‹¥å›žå¤imokè¡¨ç¤ºå·²ç»å¯åŠ¨ã€‚echo dump| nc 127.0.0.1 2181 # åˆ—å‡ºæœªç»å¤„ç†çš„ä¼šè¯å’Œä¸´æ—¶èŠ‚ç‚¹ã€‚echo kill | nc 127.0.0.1 2181 # å…³æŽ‰serverecho conf | nc 127.0.0.1 2181 # è¾“å‡ºç›¸å…³æœåŠ¡é…ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚echo cons | nc 127.0.0.1 2181 # åˆ—å‡ºæ‰€æœ‰è¿žæŽ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯çš„å®Œå…¨çš„è¿žæŽ¥ / ä¼šè¯çš„è¯¦ç»†ä¿¡æ¯ã€‚echo envi | nc 127.0.0.1 2181 # è¾“å‡ºå…³äºŽæœåŠ¡çŽ¯å¢ƒçš„è¯¦ç»†ä¿¡æ¯ï¼ˆåŒºåˆ«äºŽ conf å‘½ä»¤ï¼‰ã€‚echo reqs | nc 127.0.0.1 2181 # åˆ—å‡ºæœªç»å¤„ç†çš„è¯·æ±‚ã€‚echo wchs | nc 127.0.0.1 2181 # åˆ—å‡ºæœåŠ¡å™¨ watch çš„è¯¦ç»†ä¿¡æ¯ã€‚echo wchc | nc 127.0.0.1 2181 # é€šè¿‡ session åˆ—å‡ºæœåŠ¡å™¨ watch çš„è¯¦ç»†ä¿¡æ¯ï¼Œå®ƒçš„è¾“å‡ºæ˜¯ä¸€ä¸ªä¸Ž watch ç›¸å…³çš„ä¼šè¯çš„åˆ—è¡¨ã€‚echo wchp | nc 127.0.0.1 2181 # é€šè¿‡è·¯å¾„åˆ—å‡ºæœåŠ¡å™¨ watch çš„è¯¦ç»†ä¿¡æ¯ã€‚å®ƒè¾“å‡ºä¸€ä¸ªä¸Ž session ç›¸å…³çš„è·¯å¾„ã€‚ å¦‚æžœæç¤ºï¼šxxx is not executed because it is not in the whitelist.è¯·åœ¨conf/zoo.cfgä¸­æ·»åŠ ï¼š14lw.commands.whitelist=* #æˆ–è€…å…·ä½“æŒ‡ä»¤stat, ruok æŸ¥çœ‹ç®¡ç†æœåŠ¡ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œéœ€è¦zkCliå‘½ä»¤ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œè¿™ä¸ªåœ¨zookeeperæ‰€å¯¹åº”çš„binç›®å½•ä¸‹æœ‰ï¼ŒzkCliè¿›å…¥åŽï¼Œéšä¾¿æ•²ç‚¹å•¥ï¼Œä½ å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829[zk: localhost:2181(CONNECTED) 0] ?ZooKeeper -server host:port cmd args addauth scheme auth close config [-c] [-w] [-s] connect host:port create [-s] [-e] [-c] [-t ttl] path [data] [acl] delete [-v version] path deleteall path delquota [-n|-b] path get [-s] [-w] path getAcl [-s] path history listquota path ls [-s] [-w] [-R] path ls2 path [watch] printwatches on|off quit reconfig [-s] [-v version] [[-file path] | [-members serverID=host:port1:port2;port3[,...]*]] | [-add serverId=host:port1:port2;port3[,...]]* [-remove serverId[,...]*] redo cmdno removewatches path [-c|-d|-a] [-l] rmr path set [-s] [-v version] path data setAcl [-s] [-v version] path acl setquota -n|-b val path stat [-w] path sync pathCommand not found: Command not found ?[zk: localhost:2181(CONNECTED) 1] æˆ‘ä¸»è¦ä½¿ç”¨äº†ï¼š ls æ˜¾ç¤ºznode crate åˆ›å»ºznodeï¼Œå¹¶è®¾ç½®åˆå§‹å†…å®¹ get èŽ·å–znodeå†…å®¹ set ä¿®æ”¹znodeå†…å®¹ delete åˆ é™¤znode é€€å‡ºå®¢æˆ·ç«¯ï¼š quit å®žéªŒå·¥ç¨‹æµ‹è¯•å·¥ç¨‹åœ°å€ ï¼Œå¼€å‘çŽ¯å¢ƒï¼š mac os x &amp; idea &amp; gradle spring cloud &amp; zookeeper config &amp; discovery zookeeper 3.5 in docker è¯·æ³¨æ„ï¼Œå…¶ä¸­ä½¿ç”¨çš„æœ€æ–°ç‰ˆçš„curatoråŒ…åªæ”¯æŒzookeeper3.5 å…³é”®ä»£ç é€šè¿‡CuratorFramework è®¾ç½®æˆ–è¯»å–zookeeperä¸­çš„èŠ‚ç‚¹123456789curatorFramework.blockUntilConnected();Stat stat = curatorFramework.checkExists().forPath("/test");if(stat==null) &#123; curatorFramework.create().creatingParentsIfNeeded() .withACL(ZooDefs.Ids.OPEN_ACL_UNSAFE) .forPath("/test", "data".getBytes());&#125;byte[] bytes = curatorFramework.getData().forPath("/test");log.info("path test:&#123;&#125;", new String(bytes)); å°†zookeeperä½œä¸ºé…ç½®ä¸­å¿ƒï¼Œé€šè¿‡valueæ³¨è§£èŽ·å–zookeeperä¸­çš„é…ç½®ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥åšåˆ°åœ¨ä¸é‡æ–°å¯åŠ¨æœåŠ¡çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åŠ è½½é…ç½®ä¿¡æ¯ä»£ç éœ€è¦ï¼š 12@Value("$&#123;zc&#125;")private String zc; ä¹Ÿå¯ä»¥å°†é…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œå¹¶å®žçŽ°åŠ¨æ€åˆ·æ–°123456789@Component@RefreshScope@ConfigurationProperties("demopro")public class DemoProperties &#123; private String key; private String value; //get set&#125; é…ç½®æ–‡ä»¶éœ€è¦ï¼š 12345678application: name: zookeeperDemo config: enabled: true root: /demo defaultContext: context profileSeparator: ',' å› ä¸ºspring cloudæ”¯æŒactive profileï¼Œæ‰€ä»¥å¯¹åº”çš„zookeeperçš„znodeè·¯å¾„å¯ä»¥æ˜¯ï¼š /demo/zookeeperDemo,default /demo/zookeeperDemo /demo/context,default /demo/context å…·ä½“åˆ°zcè¿™ä¸ªé…ç½®ï¼Œå¯¹åº”åœ¨defaultä¸‹çš„å…¨è·¯å¾„æ˜¯ï¼š/demo/zookeeperDemo,default/zcï¼Œä½ å¯ä»¥åœ¨zookeeperä¸­åˆ›å»ºä¸€ä¸ªï¼š 1create /demo/zookeeperDemo,default/zc data å…·ä½“åˆ°DemoPropertiesé…ç½®å¯¹åº”åœ¨defaultä¸‹çš„å…¨è·¯å¾„æ˜¯ï¼š12create /demo/zookeeperDemo,default/demopro.key prokeycreate /demo/zookeeperDemo,default/demopro.value provalue ä»¥ä¸Šä¸ºå·¥ç¨‹å®žéªŒçš„å…³é”®ç‚¹ï¼Œå…·ä½“å·¥ç¨‹å‚è€ƒæºç ï¼Œå·¥ç¨‹åŽç»­å¯èƒ½è¿˜ä¼šæ›´æ–°ã€‚ åæ§½è¿™äº›é—®é¢˜ä¸æ˜¯é’ˆå¯¹zookeeperï¼Œåªæ˜¯å€Ÿæ­¤è¡¨è¾¾ä¸€ä¸‹ï¼Œå…¶å®ƒå›½å†…å®žä¾‹ä»£ç ä¹Ÿæœ‰ç±»ä¼¼çš„æ™®éçŽ°è±¡ Curatorçš„ä½¿ç”¨ï¼Œå›½å†…å‡ ä¹Žæ²¡æœ‰ï¼Œè¯´æ˜Žå¤§å®¶å‡ ä¹Žæ²¡æœ‰å°è¯•è‡ªå·±åŽ»ä½¿ç”¨zookeeperçš„å­˜å‚¨åŠŸèƒ½ï¼Œéƒ½æ˜¯äººäº‘äº¦äº‘èˆ¬çš„ä»‹ç»åŠŸèƒ½ æŸ¥çœ‹ä¸­å¿ƒåŒ–é…ç½®ï¼Œè·¯å¾„çš„å†™æ³•å‡ ä¹Žéƒ½æ²¡æœ‰éªŒè¯ï¼Œå®žä¾‹ä»£ç å‡ ä¹Žéƒ½ä¸èµ·ä½œç”¨ï¼Œä½ ä»¬è´´åˆ«äººä»£ç æ—¶ä¸å®žéªŒä¸€ä¸‹å—ï¼Ÿ è¯·å¤§å®¶ï¼ˆåŒè¡Œï¼‰åšåˆ°ï¼Œæˆ‘å†™çš„ï¼Œæˆ‘è´´çš„ï¼Œæˆ‘æŠ„çš„ä»£ç ï¼Œæˆ‘è‡³å°‘éƒ½å®žéªŒè¿‡ï¼Œä¸è¦ä¼ æ’­é”™è¯¯çš„ä»£ç ã€‚å…±å‹‰ï¼]]></content>
      <categories>
        <category>tech</category>
      </categories>
      <tags>
        <tag>zookeeper</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Message Queue åˆæŽ¢]]></title>
    <url>%2F2018%2F10%2F16%2Fmq%2F</url>
    <content type="text"><![CDATA[æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰ï¼Œå¹³æ—¶ç»å¸¸é‡åˆ°çš„ä¸­é—´ä»¶æŠ€æœ¯ã€‚ä¸ªäººå·¥ä½œä¸­å·²ç»ä½¿ç”¨çš„RabbitMQï¼Œæœ€è¿‘å¼€å§‹ä½¿ç”¨Kafkaï¼Œå› æ­¤ä¹Ÿæ‰“ç®—æŠŠActiveMQå®žéªŒä¸€ä¸‹ã€‚æ‰€ä»¥æœ¬æ–‡ç« å°†å›´ç»•è¿™ä¸‰ä¸ªMQäº§å“è¿›è¡Œç›¸åº”çš„å®žéªŒã€‚ åˆ›å»ºå®žéªŒå·¥ç¨‹ä¸‰ä¸ªMQå®žéªŒå·¥ç¨‹åœ°å€ å·¥ç¨‹ä½¿ç”¨spring bootåˆ›å»ºï¼Œæ‰€æœ‰å®žçŽ°éƒ½å°†åŸºäºŽspringå…¨å®¶æ¡¶ï¼Œå·²ç»å¾ˆå®Œæ¯•äº†ï¼Œæ‹¿æ¥ç›´æŽ¥ç”¨å§ã€‚ ä¸ºäº†åŽç»­å®žéªŒæ–¹ä¾¿ï¼Œåˆ†åˆ«å¤šä¸ªmqçš„producerå’Œconsumerå·¥ç¨‹ ä½¿ç”¨gradleç®¡ç†é¡¹ç›®ç»“æž„ ä½¿ç”¨dockeræ­å»ºæµ‹è¯•æ‰€éœ€è¦çš„æœåŠ¡å™¨ï¼Œæ–‡ä»¶å¯ä»¥å‚è€ƒï¼Œå®žé™…éƒ¨ç½²çŽ¯å¢ƒæœ‰æ‰€è°ƒæ•´ Kafkaé¦–å…ˆå®žéªŒäº†Kafkaçš„ç”Ÿäº§å’Œæ¶ˆè´¹åŸºæœ¬ä»£ç procuderï¼š1this.kafkaTemplate.send(topic, message); consumer:1@KafkaListener(topics = "$&#123;app.topic&#125;") è¿è¡Œè¯´æ˜Ž ä½¿ç”¨ä¸‰ä¸ªkafka broker èŠ‚ç‚¹ï¼Œä½¿ç”¨docker-composeå¯¹åº”çš„serviceå®žçŽ° åˆ›å»ºtopicï¼Œä½¿ç”¨ä¸‰ä¸ªåˆ†åŒºå’Œä¸¤ä¸ªå‰¯æœ¬ ä½¿ç”¨ideaï¼Œè¿è¡Œå·¥ç¨‹ï¼Œé…ç½®å¤šä¸ªè¿è¡Œå®žä¾‹ ç‰¹æ€§æ€»ç»“ ä¸€ä¸ªåˆ†åŒºå¯¹åº”ä¸€ä¸ªæ¶ˆè´¹è€… ä¸€ä¸ªåˆ†åŒºå†…æ¶ˆæ¯é¡ºåºæ¶ˆè´¹ åˆ†åŒºå’Œå’ŒæœåŠ¡å™¨åº”è¯¥æˆå€æ•°å…³ç³»ï¼Œä¿è¯åˆ†åŒºå‡åŒ€åˆ†å¸ƒ å‰¯æœ¬æ•°é‡åº”è¯¥å°äºŽæœåŠ¡å™¨æ•°é‡ï¼Œå½“å¯ç”¨åˆ†åŒºå¤±æ•ˆæ—¶ï¼Œä»Žå‰¯æœ¬ä¸­é€‰å‡ºleaderï¼Œæˆä¸ºæ–°çš„å¯ç”¨åˆ†åŒº èŠ‚ç‚¹é«˜å¯ç”¨æ€§ï¼Œæ¶ˆè´¹æœåŠ¡çž¬é—´åˆ‡æ¢ ä¿å­˜è¿‘æœŸæ‰€æœ‰æ•°æ®ï¼Œé€šè¿‡offsetå¯ä»¥èŽ·å¾—ä»»æ„ä½ç½®çš„æ¶ˆæ¯ æ˜¯å¦å…è®¸è‡ªåŠ¨åˆ›å»ºtopicéœ€è¦åœ¨kafkaä¸­é…ç½® ACK MODE å’Œ Commitéœ€è¦æ³¨æ„ack modeå’Œ commitï¼Œæ­¤é¡¹å½±å“æ•°æ®çš„åˆ·ç›˜æœºåˆ¶ã€‚æ ¹æ®å®žé™…æƒ…å†µé€‰æ‹© RECORD é€ç¬”ackå¹¶æäº¤ BATCH ä¸€ä¸ªpollå‘¨æœŸè¿›è¡Œackæäº¤ TIME é€šè¿‡è®¾ç½®ackTimeå®šæ—¶æäº¤ COUNT é€šè¿‡è®¾ç½®ackCountç´¯è®¡æ•°é‡æäº¤ COUNT_TIME åŒä¸Šç»„åˆï¼Œå“ªä¸ªå¤åˆæ‰§è¡Œå“ªä¸ª MANUAL æ‰‹åŠ¨æ–¹å¼ç”Ÿæˆackï¼Œæ‰¹é‡æäº¤ MANUAL_IMMEDIATE æ‰‹åŠ¨æ–¹å¼ç”Ÿæˆackå¹¶ç«‹å³æäº¤ å¹¿æ’­ä¸Žç‚¹å¯¹ç‚¹å¹¿æ’­æœ‰æ—¶ä¹Ÿå«pubå’Œsubï¼Œå°±æ˜¯ä¸€ä¸ªtopicï¼Œå¤šä¸ªè®¢é˜…è€…ã€‚æ¯ä¸ªè®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°ç›¸åŒçš„æ¶ˆæ¯ï¼Œæ¶ˆæ¯è¢«å¤šæ¬¡æ¶ˆè´¹ã€‚ç‚¹å¯¹ç‚¹ï¼Œä¸€ä¸ªtopicä¸­çš„æ¶ˆæ¯å¯¹åº”ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯åªä¼šè¢«æ¶ˆè´¹ä¸€æ¬¡ åœ¨Kafkaçš„ç³»ç»Ÿä¸­ï¼Œå¦‚ä½•åŒºåˆ†ä»¥ä¸Šä¸¤ç§æ–¹å¼ï¼Œæ˜¯é€šè¿‡consumer groupå®žçŽ°çš„ã€‚ å¤šä¸ªæ¶ˆè´¹è€…åœ¨ä¸€ä¸ªconsumer groupä¸­ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ˜¯ä¸€ä¸ªæ¶ˆè´¹æ•´ä½“ï¼Œæ¶ˆæ¯åªä¼šè¢«ä¸€ä¸ªå…·ä½“çš„æ¶ˆè´¹è€…æ¶ˆè´¹ä¸€æ¬¡å¦‚æžœæƒ³å¤šä¸ªåŒæ—¶æ¶ˆè´¹ï¼Œé‚£ä¹ˆéœ€è¦å¤šä¸ªconsumer groupã€‚è¿™æ ·æ¥çœ‹consumer groupéœ€è¦ä¸Žå…·ä½“æœåŠ¡å¯¹åº”ï¼Œä¸€èˆ¬ä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡éœ€è¦æ¶ˆè´¹ä¸€æ¬¡æ¶ˆæ¯ã€‚ æ€»çš„æ¥è¯´ï¼Œä½“ä¼šåˆ°äº†å¤§å®¶å–œæ¬¢çš„å®ƒåŽŸå› ï¼Œå…·ä½“ä¸€äº›å®žéªŒåŽç»­å°†æ·±å…¥ã€‚ ActiveMQæ¯ä¸ªMQä¸­çš„æœ¯è¯­å¤§åŒå°å¼‚ï¼Œä½†åˆååˆ†ä¸ç»Ÿä¸€ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ActiveMQ Queue å’Œ TopicTopicsIn JMS a Topic implements publish and subscribe semantics. When you publish a message it goes to all the subscribers who are interested - so zero to many subscribers will receive a copy of the message. Only subscribers who had an active subscription at the time the broker receives the message will get a copy of the message. QueuesA JMS Queue implements load balancer semantics. A single message will be received by exactly one consumer. If there are no consumers available at the time the message is sent it will be kept until a consumer is available that can process the message. If a consumer receives a message and does not acknowledge it before closing then the message will be redelivered to another consumer. A queue can have many consumers with messages load balanced across the available consumers. è¿™é‡Œçš„ topics ç±»ä¼¼kafkaä¸­çš„å¹¿æ’­ï¼Œpub sub æ¨¡å¼ï¼Œqueueæ˜¯é˜Ÿåˆ—æ˜¯ç‚¹å¯¹ç‚¹æ¨¡å¼ã€‚ä»–çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œæ¶ˆè´¹æ–¹å¼çš„ç¡®å®šä¸æ˜¯åœ¨consumerè®¾ç½®ï¼Œè€Œæ˜¯åœ¨MQ Serverä¸­è®¾ç½®æ¶ˆè´¹æ€§è´¨ä¸ŠåŒä¸Šï¼š topicçš„æ¶ˆæ¯ä¼šå¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹ï¼Œä½†å¹¶ä¸åšæ¶ˆæ¯å †ç§¯ï¼Œæ²¡æœ‰ä¹‹å‰çš„æ¶ˆæ¯ queueæ¶ˆæ¯åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå¹¶åšæ¶ˆæ¯ç¼“å­˜å †ç§¯ï¼Œç›´åˆ°æ¶ˆè´¹ä¸ºæ­¢ åŒæ—¶queueçš„æ¶ˆè´¹è€…æ˜¯è´Ÿè´£å‡è¡¡çš„ä¼šåˆ†æ‘Šæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸­çš„æ•°æ®ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æŒ‰é¡ºåºæ‰§è¡Œ å…³é”®ä»£ç æ¶ˆè´¹ç«¯1234567891011121314151617@Beanpublic JmsListenerContainerFactory&lt;?&gt; queueListenerFactory(ConnectionFactory connectionFactory, DefaultJmsListenerContainerFactoryConfigurer configurer) &#123; DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory(); configurer.configure(factory, connectionFactory); return factory;&#125;@Beanpublic JmsListenerContainerFactory&lt;?&gt; topicListenerFactory(ConnectionFactory connectionFactory, DefaultJmsListenerContainerFactoryConfigurer configurer) &#123; DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory(); factory.setConnectionFactory(connectionFactory); configurer.configure(factory, connectionFactory); factory.setPubSubDomain(true); return factory;&#125; é€šè¿‡spring boot é…ç½®æ–‡ä»¶å¯ä»¥æŒ‡æ˜Žæ¶ˆè´¹æ–¹å¼ï¼Œæ˜¯topicè¿˜æ˜¯queueï¼Œä½†æ˜¯åªèƒ½åªä¸€ç§ã€‚ä¸ºäº†åŒæ—¶æ”¯æŒä¸¤ç§æ–¹å¼ï¼Œæˆ‘ä¹ˆéœ€è¦å£°æ˜ŽJmsListenerContainerFactoryã€‚æ˜¯å¦å¼€å¯pub sub domainï¼Œå†³å®šæ˜¯queueè¿˜æ˜¯topic1factory.setPubSubDomain(true); åŒæ—¶é…åˆJmsListeneræ³¨è§£ï¼Œå°±å¯ä»¥æŒ‡æ˜Žæ¶ˆè´¹æ–¹å¼äº†ã€‚å¦‚æžœæŒ‡æ˜Žçš„æ¶ˆè´¹æ–¹å¼ä¸ŽActiveMQæ‰€åˆ›å»ºçš„queueæˆ–topicä¸ä¸€è‡´ï¼Œåˆ™æ¶ˆæ¯ä¸èƒ½æ­£å¸¸æ¶ˆè´¹ã€‚1@JmsListener(destination = "$&#123;app.queue&#125;", containerFactory = "queueListenerFactory") ç”Ÿäº§ç«¯123456789@Bean public Queue queue() &#123; return new ActiveMQQueue(queueName); &#125; @Bean public Topic topic() &#123; return new ActiveMQTopic(topicName); &#125; é€šè¿‡ä¸é€šç±»åž‹æŒ‡æ˜Žæ˜¯topicè¿˜æ˜¯queue è¿è¡Œè¯´æ˜ŽåŒæ ·åˆ›å»ºå¤šä¸ªè¿è¡Œå®žä¾‹ï¼Œæ¥è§‚å¯Ÿæ¶ˆè´¹æƒ…å†µ è§‚å¯ŸActiveMQç®¡ç†åŽå°ï¼Œä½ å¯ä»¥çœ‹åˆ°ç›¸å…³çš„é…ç½®ä¿¡æ¯ ç‰¹æ€§æ€»ç»“ ç®€å•ï¼Œä¸¤ç§æ¶ˆè´¹æ¨¡å¼éžå¸¸æ¸…æ™°ï¼Œæ²¡æœ‰å¤æ‚çš„ç³»ç»Ÿç»“æž„ è‡ªå¸¦ç®¡ç†åŽå°è¿˜ç®—å¥½ç”¨ è¿˜éœ€è¦æ·±å…¥ä½“ä¼šå…¶ä¸€äº›å‚æ•°è®¾ç½®ï¼Œåˆæ­¥æ„Ÿè§‰ä¸­è§„ä¸­çŸ©æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ã€‚ðŸ˜œ RabbitMQæœ€åŽè¯´ç†Ÿæ‚‰çš„RabbitMQå§ã€‚æˆ‘å¾ˆå–œæ¬¢RabbitMQï¼ŒåŠŸèƒ½ä¸Šä¸°å¯Œï¼Œæ€§èƒ½ä¸é”™ï¼Œç›¸æ¯”ActiveMQï¼Œæˆ‘æ›´å–œæ¬¢RabbitMQå§ã€‚å½“ç„¶å…·ä½“ä½¿ç”¨ï¼Œè¿˜æ˜¯è¦åˆ†åº”ç”¨åœºæ™¯ã€‚ åŸºæœ¬æ¦‚å¿µRabbitMQä¸­æœ‰å‡ ä¸ªä¸»è¦æ¦‚å¿µï¼Œå’Œå…¶å®ƒMQçš„å®šä¹‰æœ‰äº›åŒºåˆ« Exchange äº¤æ¢æœºï¼Œç”¨äºŽæ¶ˆæ¯çš„åˆ†å‘ï¼Œå¦‚æžœä¸æŒ‡å®šåˆ™ä¼šä½¿ç”¨é»˜è®¤çš„ Queue é˜Ÿåˆ—ï¼Œå®žé™…ç¼“å­˜æ•°æ®çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯å¯¹åº”å¤šä¸ªæ¶ˆè´¹è€… Topic ä¸»é¢˜ï¼Œæ¶ˆæ¯å¯ä»¥æœ‰ä¸»é¢˜ï¼Œç”¨äºŽexchangeåˆ†é…æ¶ˆæ¯æ˜¯çš„åˆ¤æ–­ä¾æ® virtual host è™šæ‹Ÿè·¯å¾„ï¼Œå¯ä»¥åˆ›å»ºè™šæ‹Ÿè·¯å¾„å°†ç›¸å…³é…ç½®åˆ†å¼€å¹¶è®¾å®šç‰¹å®šç”¨æˆ·ç”¨äºŽè®¿é—®æŽ§åˆ¶ æ¶ˆè´¹æ–¹å¼RabiitMQçš„æ¶ˆè´¹æ–¹å¼å’Œçµæ´»åº¦ä¸Šåº”è¯¥æ˜¯è¿™ä¸‰è€…ä¸­æœ€å¥½çš„ï¼Œå¹¶ä¸”å®˜æ–¹ç»™å‡ºäº†è¯¦ç»†çš„å®žä¾‹è¯´æ˜Žï¼Œè¶…æœ‰çˆ±â¤ï¸å½“ç„¶ç”±äºŽæ¨¡å¼å¤šï¼Œå®ƒä¹Ÿå°±æ˜¯æœ€å¤æ‚çš„ã€‚å®˜æ–¹ç»™å‡ºçš„å…­ä¸ªå®žä¾‹ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹ï¼Œå…·ä½“ä»£ç çœ‹åŽŸå€ Hello World æœ€æ™®é€šçš„ç”Ÿäº§æ¶ˆè´¹ä»£ç  Work Queue é»˜è®¤exchangeï¼Œå·¥ä½œé˜Ÿåˆ—ï¼Œä¸€ä¸ªé˜Ÿåˆ—è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œä¸”ä¸€ä¸ªæ¶ˆæ¯åªæ¶ˆè´¹ä¸€æ¬¡ Publish/Subscribe å‘å¸ƒè®¢é˜…ï¼Œé€šè¿‡exchange Fanoutæ¨¡å¼è¿›è¡Œé˜Ÿåˆ—åˆ†å‘ï¼Œå®žçŽ°ä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ Routing è·¯ç”±æ–¹å¼ï¼Œé€šè¿‡exchangeå’Œrouting keyæŒ‡å®šæ¶ˆæ¯è·¯ç”±åˆ°å…·ä½“çš„é˜Ÿåˆ—åˆ«ç‰¹å®šçš„æ¶ˆè´¹è€…æ¶ˆè´¹ Topics ä¸»é¢˜æ–¹å¼ï¼Œé€šè¿‡exchangeå’Œtopicæ¯”é…è§„åˆ™æŒ‡å®šæ¶ˆæ¯è·¯ç”±åˆ°å…·ä½“çš„é˜Ÿåˆ—åˆ«ç‰¹å®šçš„æ¶ˆè´¹è€…æ¶ˆè´¹ RPC é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å®žçŽ°RPCè°ƒç”¨è¿‡ç¨‹ å…³é”®ä»£ç ç”Ÿäº§ç«¯123456789101112131415// å£°æ˜Žqueue@Beanpublic Queue queue() &#123; return new Queue(queueName);&#125;// å£°æ˜Žfanout exchange@Beanpublic FanoutExchange exchange() &#123; return new FanoutExchange(broadcast, false, true);&#125;// å£°æ˜Ž queueä¸Žexchangeçš„ç»‘å®šå…³ç³»@BeanBinding binding1(Queue queueBroadone, FanoutExchange exchange) &#123; return BindingBuilder.bind(queueBroadone).to(exchange);&#125; æ¶ˆè´¹ç«¯1234@RabbitListener(queues = "$&#123;app.broadone&#125;")public void recevieOne(String message) &#123; log.info("consumer receive broadcast one: &#123;&#125;", message);&#125; è¿è¡Œè¯´æ˜Žè¿™é‡Œæˆ‘åªåšæ¶ˆæ¯åœ¨å¤šæ¶ˆè´¹è€…ä¸‹é¡ºåºæ¶ˆè´¹è§‚å¯Ÿå’Œå¹¿æ’­è§‚å¯Ÿï¼Œå…¶å®ƒå®žä¾‹å‚è€ƒå®˜ç½‘ä»£ç å§ï¼Œæ²¡æœ‰å¿…è¦é‡å¤äº†ã€‚ ä¸€ä¸ªç”Ÿäº§è€…ã€ä¸€ä¸ªqueueã€å¤šä¸ªæ¶ˆè´¹è€…ï¼Œå’ŒActiveMQ queueæ–¹å¼ï¼Œè§‚å¯Ÿæ•ˆæžœä¸€è‡´ï¼š å¤šä¸ªæ¶ˆè´¹è€…çš„æ¶ˆæ¯åˆ†æ‘Šï¼Œå¦‚æžœæ¯æ¡æ¶ˆè´¹æ‰§è¡Œæ—¶é—´å·®å¼‚è¾ƒå¤§ï¼Œæ¶ˆè´¹é¡ºåºä¸ä¿è¯ä¸€è‡´ æ¶ˆè´¹é€€å‡ºï¼Œå¦ä¸€ä¸ªæ¶ˆè´¹è€…ä¼šæŽ¥æ›¿æœªå®Œæˆçš„æ¶ˆæ¯å·¥ä½œ å¹¿æ’­æ¶ˆæ¯é»˜è®¤å †ç§¯ï¼Œå…¶æœ¬è´¨è¿˜æ˜¯æ¶ˆè´¹é˜Ÿåˆ—ï¼Œä¸èƒ½å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ªqueueå®žçŽ°pub/sub åŒæ ·åˆ›å»ºå¤šä¸ªè¿è¡Œå®žä¾‹ï¼Œæ¥è§‚å¯Ÿæ¶ˆè´¹æƒ…å†µ ç®¡ç†åŽå°å¯ä»¥çœ‹åˆ°çš„ä¿¡æ¯ ç‰¹æ€§æ€»ç»“ åŠŸèƒ½å¤šï¼Œä½¿ç”¨çµæ´» AMQPï¼Œæ€§èƒ½ä¸é”™ ç®¡ç†åŽå°æ–¹ä¾¿ å®žéªŒæ€»ç»“ å¦‚æžœä½ éœ€è¦æ¶ˆæ¯é¡ºåºæ¶ˆè´¹ã€åˆ†å¸ƒå¼å­˜å‚¨çš„é«˜å¯ç”¨æ€§ï¼ŒæŒ‡å®šæ¶ˆæ¯ä½ç½®å†æ¬¡æ¶ˆè´¹ï¼Œè¾ƒé«˜çš„åžå â€”â€” Kafka å¦‚æžœä½ è¦æ¶ˆæ¯æ­£å¸¸æ¶ˆè´¹ï¼Œæ— é¡ºåºè¦æ±‚ã€æ— ç‰¹æ®Šè·¯ç”±è¦æ±‚ã€‚å¹¿æ’­æ¶ˆè´¹æ—¶ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥ç›‘å¬ä¸€ä¸ªqueueçš„æ–¹å¼å®Œæˆ â€”â€” ActiveMQ å¦‚æžœä½ è¦é€‚åˆå¤šç§æ¶ˆæ¯æ ¹æ®è‡ªå®šä¹‰è§„åˆ™ï¼ˆé€šé…ç¬¦ç­‰ï¼‰è·¯ç”±é“ä¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–å…¼å®¹ä¸é€šåœºæ™¯ï¼Œå¸Œæœ›å¹¿æ’­æ¶ˆæ¯æœ‰å †ç§¯ä¸ä¸¢å¤± â€”â€” RabbitMQ ä»¥ä¸ŠMQéƒ½è¿˜æœ‰å¾ˆå¤šé…ç½®å‚æ•°åº”å¯¹ä¸é€šçš„åº”ç”¨éœ€æ±‚ï¼Œå¯èƒ½é€šè¿‡é…ç½®å®žçŽ°é»˜è®¤ä¸æ”¯æŒçš„åŠŸèƒ½ï¼Œå…·ä½“ä½¿ç”¨æƒ…å†µï¼Œå¦‚æžœä»¥åŽé‡åˆ°æˆ‘å†å•ç‹¬è¯´æ˜Žã€‚]]></content>
      <categories>
        <category>tech</category>
      </categories>
      <tags>
        <tag>MQ</tag>
        <tag>middleware</tag>
        <tag>Kafka</tag>
        <tag>ActiveMQ</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OpenStack ä»Žå…¥é—¨åˆ°ç»§ç»­]]></title>
    <url>%2F2018%2F10%2F11%2Fopenstack%2F</url>
    <content type="text"><![CDATA[è¿‘æœŸç»™è‡ªå·±æŒ–çš„æŠ€æœ¯å‘æœ‰ç‚¹å¤šï¼Œæˆ‘å¿ä¸ä½å†æŒ–ä¸€ä¸ªï¼Œæœ€è¿‘åˆäº†è§£åˆ°äº†äº‘æœåŠ¡çš„ç›¸å…³æŠ€æœ¯ï¼ˆç®—æ˜¯æŠ€æœ¯å‚¨å¤‡å§ï¼‰ What is OpenStack?OpenStackæ˜¯è¢«å¹¿æ³›ä½¿ç”¨çš„äº‘æ“ä½œç³»ç»Ÿï¼Œå®ƒç®¡å•¥ï¼Œå¦‚å›¾ï¼š Componentsæ‰€æœ‰ç»„ä»¶è¯¦è§ï¼šç½‘ç«™åˆ—å‡ºçš„æ‰€æœ‰ç»„ä»¶ æ‰¾å‡ ä¸ªä»‹ç»å¤šçš„ï¼Œç®€å•è¯´ä¸€ä¸‹ HORIZONå‰ç«¯Webç®¡ç†ç•Œé¢ï¼ŒåŒ…æ‹¬DashboardæŽ§ä»¶å±•ç¤ºï¼Œä¾¿äºŽç”¨æˆ·å¯¹ç›¸å…³æœåŠ¡è¿›è¡Œæ“ä½œ NOVAè®¡ç®—æœåŠ¡,åº”è¯¥æ˜¯ç®¡ç†è®¡ç®—èµ„æºçš„ç»„ä»¶ï¼Œæä¾›ç›¸åº”çš„ç®¡ç†æœåŠ¡ NEUTRONæä¾›äº‘è®¡ç®—çš„ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä¸ºOpenStackå…¶ä»–æœåŠ¡æä¾›ç½‘ç»œè¿žæŽ¥æœåŠ¡ï¼Œå®žçŽ°SDN SWIFTSwiftæ˜¯é«˜å¯ç”¨ã€åˆ†å¸ƒå¼ã€æœ€ç»ˆä¸€è‡´æ€§çš„å¯¹è±¡å­˜å‚¨ï¼Œå…·ä½“æ–‡ä»¶å¯¹è±¡ CINDERå—å­˜å‚¨æœåŠ¡ï¼Œæ›´åƒæ˜¯ç¡¬ç›˜ï¼Œæ•°æ®å· KEYSTONEè®¤è¯æœåŠ¡ï¼Œæ”¯æŒLDAP Oauth OpenIDç­‰ GLANCEé•œåƒæœåŠ¡ï¼Œä¸é€šçš„æ“ä½œç³»ç»Ÿé•œåƒ HEATç¼–æŽ’æž¶æž„èµ„æº ä¸é€šåœºæ™¯ä¸­éœ€è¦ä¸é€šçš„æœåŠ¡æ¥æž„å»ºï¼Œå¯ä»¥å‚è€ƒsample configurations What is the relationship between Docker and OpenStack Docker ä¸»è¦é’ˆå¯¹ Paas å¹³å°ï¼Œæ˜¯ä»¥åº”ç”¨ä¸ºä¸­å¿ƒã€‚ OpenStack ä¸»è¦é’ˆå¯¹ Iaas å¹³å°ï¼Œä»¥èµ„æºä¸ºä¸­å¿ƒï¼Œå¯ä»¥ä¸ºä¸Šå±‚çš„ PaaS å¹³å°æä¾›å­˜å‚¨ã€ç½‘ç»œã€è®¡ç®—ç­‰èµ„æºã€‚ è¿™ä¸ªè¯é¢˜å…ˆå¼€ä¸ªå¤´ï¼ŒåŽé¢æœ‰æœºä¼šå†ç»§ç»­æ·±å…¥å§ã€‚]]></content>
      <categories>
        <category>tech</category>
      </categories>
      <tags>
        <tag>openstack</tag>
        <tag>cloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„OKR(2018.10)]]></title>
    <url>%2F2018%2F09%2F29%2Fokr%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘é‡æ¸©å´å†›è€å¸ˆçš„ç¡…è°·æ¥ä¿¡ï¼Œæƒ³èµ·äº†Googleäººå‘˜é‡‡ç”¨çš„ç›®æ ‡ç®¡ç†æ–¹æ³•OKR(Objectives and Key Results)å…¨ç§°ä¸ºâ€œç›®æ ‡å’Œå…³é”®æˆæžœâ€ã€‚å´å†›è€å¸ˆåœ¨å…¶ç¡…è°·æ¥ä¿¡114å°ä¿¡ä¸­åˆ†äº«äº†è¿™ä¸ªæ–¹æ³•ï¼ˆä¸ä»…å¯ä»¥ç”¨äºŽå·¥ä½œä¹Ÿå¯ä»¥ç”¨äºŽè‡ªå·±çš„ç”Ÿæ´»ï¼‰å¹¶ç»“åˆä»–ä¸ªäººçš„2017å¹´ç›®æ ‡åšäº†é˜è¿°ã€‚è¿™ä¹Ÿä½¿æˆ‘äº§ç”Ÿäº†åŒæ ·å¿µå¤´ï¼Œç”¨OKRæ–¹å¼ç®¡ç†æˆ‘è‡ªå·±çš„ç›®æ ‡ã€‚ åˆè¡·å’Œç†è§£æˆ‘å¸Œæœ›æˆ‘å¯ä»¥ä¸æ–­è¿›æ­¥ï¼Œå¯ä»¥ç”¨æ›´ä¸ºæœ‰æ•ˆæ–¹å¼ä½¿è‡ªå·±èŽ·å¾—æˆé•¿ï¼Œè€Œå¯¹OKRç›®æ ‡ç®¡ç†åˆæ­¥äº†è§£ä¸‹æ¥ï¼Œæˆ‘è®¤ä¸ºæ˜¯åˆé€‚æˆ‘çš„æƒ³æ³•ã€‚ OKRçš„ç›®æ ‡åˆ¶å®šä¸€èˆ¬æ˜¯éœ€è¦ä¸€äº›æŒ‘æˆ˜æ€§çš„ï¼Œè¿™æ ·æ‰èƒ½è¾¾åˆ°è‡ªæˆ‘æå‡çš„ç›®çš„ï¼Œæˆ‘ä¹Ÿå°†é€æ­¥åŠ å¤§ç›®æ ‡è¾¾æˆçš„éš¾åº¦ï¼ŒåŒæ—¶å¼€å§‹ä¹Ÿå¯èƒ½ä¼šæœ‰äº›è®¾å®šä¸åˆç†ã€‚ å…¶æ¬¡ï¼Œç›®æ ‡ä¸èƒ½å¤ªå¤šï¼Œå¦åˆ™éš¾ä»¥é›†ä¸­æ³¨æ„åŠ›ï¼Œä¸€èˆ¬åœ¨5ä¸ªä»¥å†…ã€‚ æ—¶é—´ä¸æ˜“å¤ªé•¿æˆ–å¤ªçŸ­ï¼Œå¤ªçŸ­éš¾ä»¥å®žçŽ°æœ‰æŒ‘æˆ˜æ€§çš„ç›®æ ‡ã€‚å¤ªé•¿è¿‡ç¨‹æœ‰å¯èƒ½æœ‰å¤ªå¤šä¸ç¡®å®šæ€§çš„äº‹æƒ…æ‰“ç ´åŽŸæœ‰çš„è®¡åˆ’ï¼Œä½¿å¾—åˆ¶å®šæ„ä¹‰å‡å¼±ã€‚æ‰€ä»¥å€Ÿé‰´Googleçš„åšæ³•ï¼Œåˆ¶å®šå­£åº¦OKRã€‚ å­£åº¦ OKRæ­£å¥½ä¹æœˆåº•äº†ï¼Œ10æœˆå¼€å§‹æ­£å¥½æ˜¯2018å¹´æœ€åŽä¸€ä¸ªå­£åº¦ï¼Œä¹Ÿå°†æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªOKRå­£åº¦ã€‚ ç›®æ ‡ä¸€ è‹±è¯­æµåˆ©è¯´å­¦ä¹ è¾¾æ ‡è¿‘æœŸå‚åŠ äº†è‹±è¯­æµåˆ©è¯´ä»˜è´¹è¯¾ç¨‹ï¼Œæå‡è‡ªå·±çš„å£è¯­èƒ½åŠ›ï¼Œä¹Ÿæ˜¯è¿‘æœŸä¸»è¦çš„å­¦ä¹ å†…å®¹ã€‚ è¿žç»­æ‰“å¡ï¼Œæ¯å¤©å­¦ä¹ æ—¶é—´å¹³å‡ä¸ä½ŽäºŽ70åˆ†é’Ÿ æ‰€æœ‰è¯¾ç¨‹åˆ†æ•°ä¸ä½ŽäºŽ3é¢—æ˜ŸðŸŒŸï¼ˆæ»¡æ˜Ÿ4é¢—ï¼‰ æµåˆ©è¯´è¯„å®šçš„å£è¯­ç­‰çº§ä¸Šå‡ä¸€çº§ã€‚ï¼ˆæŒ‰ç…§å½“å‰è¿›åº¦åº”è¯¥å¯ä»¥åšåˆ°ï¼‰ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜åœ¨å¾—åˆ°APPä¸Šè´­ä¹°äº†ã€Šå´å†›çš„è°·æ­Œæ–¹æ³•è®ºã€‹å’Œã€Šé¦™å¸…çš„åŒ—å¤§é‡‘èžå­¦è¯¾ã€‹è¿™ä¸ªå­¦ä¹ ä¹Ÿä¼šä¿æŒï¼Œä½†è¿™ä¸ªåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆæŒ‘æˆ˜äº†ã€‚ ç›®æ ‡äºŒ æ·±å…¥ä¸€ä¸ªè®¡ç®—æœºä¸­çš„æµè¡ŒæŠ€æœ¯å­¦ä¹ æŽŒæ¡å¹¶æ·±å…¥ä¸€ä¸ªæµè¡Œçš„è®¡ç®—æœºæŠ€æœ¯ æ·±å…¥äº†è§£å’ŒæŽŒæ¡ Kubernets è¿™æ˜¯æˆ‘æœ€è¿‘æœ€æƒ³æŽŒæ¡çš„ä¸€ä¸ªæŠ€æœ¯ã€‚é™¤æ­¤ä¹‹å¤–æˆ‘è¿˜ä¼šä¸å®šæœŸæ›´æ–°ä¸ªäººgithubä¸­çš„ä¸€äº›å°ä¾‹å­ï¼Œæ¥è®°å½•æˆ‘é›¶ç¢Žçš„æŠ€æœ¯æ€»ç»“ã€‚ ç›®æ ‡ä¸‰ çœ‹å®Œä¸€æœ¬éžè®¡ç®—æœºç±»ä¹¦æˆ‘çš„ä¹¦å•å·²ç»åˆ—äº†å¾ˆä¹…ã€å¾ˆå¤šäº†ï¼Œæ˜¯éœ€è¦èŠ±äº›æ—¶é—´çœ‹çœ‹ä¹¦äº† çœ‹å®Œèµ«æ‹‰åˆ©çš„ã€Šä»Šæ—¥ç®€å²ã€‹ï¼Œçœ‹çœ‹éƒ½æå‡ºäº†ä»€ä¹ˆé—®é¢˜ å› ä¸ºæ—¶é—´åŽŸå› ï¼Œè¿™ä¸ªç›®æ ‡å¯èƒ½æœ€éš¾å®Œæˆã€‚ä¹‹å‰æŠŠèµ«æ‹‰åˆ©çš„ã€Šäººç±»ç®€å²ã€‹çœ‹å®Œäº†ï¼Œã€Šæœªæ¥ç®€å²ã€‹çœ‹äº†ä¸€éƒ¨åˆ†ï¼Œçœ‹ä¸ä¸‹åŽ»äº†ï¼Œå†æ‰¾æ—¶é—´å§ã€‚è€Œã€Šä»Šæ—¥ç®€å²ã€‹ä¸­çš„å½“ä»Šé—®é¢˜ä½¿æˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£çš„ï¼Œæƒ³è¯»è¯»ï¼Œä¹Ÿç®—æ˜¯æŠŠèµ«æ‹‰åˆ©çš„è‘—ä½œéƒ½çœ‹äº†çœ‹ã€‚é¢˜å¤–è¯ï¼Œè¿‘åŠå¹´è¿˜çœ‹äº†ä¸¤ä¸ªå°è¯´ã€Šå‰¯æœ¬ã€‹å’Œã€Šå¤´å·çŽ©å®¶ã€‹è¿™ä¸¤ä¸ªéƒ½æœ‰å¯¹åº”çš„å½±è§†ä½œå“ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹ï¼Œçº¯å½“æ¶ˆé£ã€‚ ç›®æ ‡å›› é”»ç‚¼èº«ä½“ï¼Œä¿æŒèº«ä½“å¥åº·å¤©æ°”è½¬å‡‰ï¼Œç»ˆäºŽå¯ä»¥é”»ç‚¼èº«ä½“äº†ï¼Œå¤©æ°”çƒ­æ—¶çœŸçš„æ˜¯æ‡’å¾—åŠ¨ï¼Œæžçˆ±å‡ºæ±—çš„æˆ‘æ›´å–œæ¬¢å†¬å¤©ã€‚ æ¯å‘¨ç”¨Keepï¼ˆä¸€ä¸ªå¥èº«APPï¼‰ä¸å°‘äºŽ2æ¬¡ï¼Œ æ¯å‘¨ è·‘æ­¥ä¸å°äºŽ3å…¬é‡Œï¼ˆæˆ‘çŸ¥é“è¿™ä¸ªç›®æ ‡å®šä½Žäº†ä¸€äº›ï¼Œæˆ‘éœ€è¦å…ˆé€‚åº”ä¸€ä¸‹ï¼‰ æ¯æ—¥ç¡çœ ï¼ˆåŒ…å«åˆä¼‘ï¼‰ä¸å°‘äºŽ7ä¸ªå°æ—¶ã€‚ è¿™ä¸ªä¼°è®¡éš¾åº¦ä¹Ÿä¸å°ï¼Œæˆ‘å¯ä»¥æ”¯é…çš„æ—¶é—´å¤ªæœ‰é™äº†ï¼ŒçŽ°åœ¨æ™šä¸Šç¡çœ å¹³å‡å°äºŽ6å°æ—¶ï¼Œå¾ˆå°‘è¿åŠ¨ï¼Œè¿™æ˜¯æˆ‘ç²¾åŠ›æœ‰äº›ç–²å€¦ï¼Œæ‰€ä»¥éœ€è¦æ”¹å˜ä¸€ä¸‹ã€‚ ç›®æ ‡äº” é™ªå­©å­Family is firstï¼Œæˆ‘ä¸€ç›´æé†’è‡ªå·±ï¼Œå­©å­åˆæ˜¯å…¶ä¸­æœ€å…³é”®çš„ã€‚ æ¯æ—¥è‡³å°‘ç”¨åŠä¸ªå°æ—¶ä¸Žå­©å­åšæœ‰æ•ˆæ²Ÿé€šï¼Œäº†è§£ä¸€å¤©çš„æƒ…å†µæˆ–è®¨è®ºä¸€ä¸ªå°äº‹æƒ… å¹³å‡æ¯å‘¨ç”¨å®Œæ•´çš„3ä¸ªå°æ—¶é™ªå­©å­åšäº›æœ‰æ„ä¹‰æˆ–è€…æœ‰è¶£çš„äº‹æƒ…ï¼ŒåŒ…å«æˆ·å¤–æ´»åŠ¨ç­‰ã€‚ äº”ä¸ªç›®æ ‡ï¼Œä¸å¤šä¸å°‘ï¼Œå¸Œæœ›å¯ä»¥åœ¨ä¸‹é¢ä¸€ä¸ªå­£åº¦éƒ½å¯ä»¥åšåˆ°ã€‚ å¹´åº¦ OKRç´¢æ€§å†åˆ—å‡ ä¸ªå¹´åº¦çš„OKRå§ï¼Œå¸Œæœ›åŽé¢ä¸€å¹´å¯ä»¥åšåˆ° ç›®æ ‡ä¸€ ä»˜è´¹è¯¾ç¨‹å­¦ä¹  è´­ä¹°ä»˜è´¹è¯¾ç¨‹ï¼Œå…¨å¹´ä¸å°‘äºŽä¸‰é—¨ï¼Œå¹¶å®Œæˆå­¦ä¹ å†…å®¹ ç›®æ ‡äºŒ è¯»ä¹¦ è¯»éžè®¡ç®—æœºç±»ã€éžå°è¯´ç±»ä¹¦ï¼Œå…¨å¹´ä¸å°‘äºŽ5æœ¬ã€‚ ç›®æ ‡ä¸‰ è‹±è¯­å£è¯­ å®Œæˆæµåˆ©è¯´å£è¯­ä»˜è´¹è¯¾ç¨‹å†…å®¹ æŒ‰ç…§æµåˆ©è¯´æ ‡å‡†ï¼Œè¾¾åˆ°Level 6çº§æˆ–ä»¥ä¸Š å½“ç„¶è¿˜æœ‰å·¥ä½œä¸Šçš„ä¸€äº›ç›®æ ‡ï¼Œè¿™é‡Œå°±è¯¦è¿°äº†ã€‚ åˆ—å‡ºè¿™äº›å’Œå¤§å®¶åˆ†äº«ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç£ä¿ƒè‡ªå·±ï¼Œå¦‚æžœä½ ä¹Ÿæ„Ÿå…´è¶£ï¼Œä¸å¦¨è¯•è¯•ã€‚å¦‚æœ‰å¥½çš„å»ºè®®å’Œæƒ³æ³•æ¬¢è¿Žç•™è¨€ï¼Œè°¢è°¢ï¼ I wanna improve myself, better late than never. OKRå‚è€ƒæ–‡ç« ]]></content>
      <categories>
        <category>note</category>
      </categories>
      <tags>
        <tag>OKR</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java 11]]></title>
    <url>%2F2018%2F09%2F27%2FJava-11%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©å¾—çŸ¥Java 11å‘å¸ƒã€‚è¯·å…è®¸æˆ‘è¯´ï¼šæˆ‘çš„å¤©å•Šï¼Œç«Ÿç„¶Java 11äº†ã€‚ è¿žJava 8è¿˜æ²¡æœ‰å®Œå…¨ç†Ÿç»ƒä½¿ç”¨çš„æˆ‘ï¼Œä¸€æ—¶é—´æœ‰ç‚¹ææƒšã€‚ è¿‘æœŸï¼ŒJavaæ›´æ–°å¦‚æ­¤é¢‘ç¹ï¼Œè®©äººæœ‰ç‚¹åº”æŽ¥ä¸æš‡ï¼Œæ–°çš„featureså±‚å‡ºä¸ç©·ï¼Œè€Œæˆ‘ä»¬åˆçœŸçš„å­¦ä¹ ä½¿ç”¨äº†å‡ ä¸ªå‘¢ï¼Ÿ åæ­£æˆ‘åªç”¨äº†ä¸€å°éƒ¨åˆ†å§ã€‚è¿™é‡Œä¸åˆ—ä¸¾Java 8ä¹‹åŽå„ä¸ªç‰ˆæœ¬ä¸­çš„featuresäº†ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒGoogleã€‚ è¿™é‡Œåªæƒ³è¯´ï¼šJavaä½œä¸ºç”Ÿå‘½åŠ›æžå¼ºçš„å¤§åž‹æœåŠ¡ç±»å¼€å‘è¯­è¨€ï¼ŒOracleå¥½åƒåœ¨ç»™å…¶æ³¨å…¥æ–°çš„æ´»åŠ›ï¼Œä¹Ÿåœ¨æ‰“ç ´JavaåŽŸæœ‰çš„å¢¨å®ˆé™ˆè§„ã€‚æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå®ƒçš„å¾ˆå¤šæ–°ç‰¹æ€§æ˜¯æºäºŽè¿™ä¸ªæ—¶ä»£æŠ€æœ¯çš„å‘å±•ï¼Œä¹Ÿæœ‰å¾ˆå¤šå€Ÿé‰´äº†å…¶å®ƒè¯­è¨€çš„ç‰¹æ€§ï¼Œåœ¨â€æ(da)å‡(po)â€åŽŸæœ‰çš„è¯­æ³•ç»“æž„æ–¹å¼ç»™ç”¨æˆ·å¸¦æ¥æ–°çš„å¼€å‘ä½“éªŒã€‚è¿™ä¹Ÿæ˜¯åœ¨æ»¡è¶³æ–°åŠ å…¥Javaä¸–ç•Œçš„å¼€å‘è€…ï¼Ÿ ä¸çŸ¥Javaè€ç¨‹åºå‘˜å¦‚ä½•æ„Ÿå—ï¼Œå°±æˆ‘è€Œè¨€ï¼Œæˆ‘æ›´å–œæ¬¢ä¸æ–­æ›´æ–°ï¼Œè™½ç„¶æœ€è¿‘æ›´æ–°ç¡®å®žæœ‰ç‚¹é¢‘ç¹äº†ã€‚ å½“ç„¶é™¤äº†è¯­æ³•ç‰¹æ€§çš„æ”¹å˜æ„å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šåº•å±‚ç»“æž„çš„æ”¹è¿›ï¼Œå½“ç„¶è¿™æ‰æ˜¯å…¶æ ¸å¿ƒã€‚ä¾‹å¦‚ç±»åº“å‘å±•ã€æ¨¡å—åŒ–ç®¡ç†ã€å®‰å…¨ç‰¹æ€§ä¸Žè¡¥ä¸ã€æ–°çš„JVM GCã€è„šæœ¬åŒ–ã€é»‘åŒ£å­(JFR)ç­‰ã€‚ è¯•è¯•ä¸ï¼ŸJava 9 å’Œ 10 ç®€ç›´å°±æ˜¯ä¸€é—ªè€Œè¿‡ï¼Œå°è±¡ä¸­å¥½åƒå°±ä¸€ä¸¤ä¸ªå°ç‰ˆæœ¬å·ï¼Œè€ŒJava 11 ä¸åŒäº†ï¼Œå®ƒå¯æ˜¯LTSã€‚Oracleå®˜æ–¹æ‰¿è¯ºå¯¹å…¶ä¼šæœ‰æŒç»­çš„updateæ›´æ–°ã€‚åŒæ—¶å¤§å®¶æ·±çˆ±çš„Java 8é©¬ä¸Šå°±è¦ä¸æ›´æ–°äº†ï¼Œæ‰€ä»¥è¿™æ¬¡çœŸçš„å¯ä»¥å°è¯•è¿›è¡ŒJDKä¼ä¸šçº§åˆ‡æ¢äº†ã€‚ ä¸ªäººæ„Ÿè§‰Java æ¯åŠå¹´æ›´æ–°çš„æ–¹å¼ï¼Œçœ‹æ¥è¦æ­¢ä½å…¶è¯­è¨€å‘å±•çš„é¢“åŠ¿ï¼Œé‡æ–°å´›èµ·äº†ã€‚Javaä½œä¸ºä¸»è¦çš„å¼€å‘è¯­è¨€è¿˜æ˜¯å€¼å¾—å¤§å®¶æŠ€æœ¯æŠ•å…¥çš„ã€‚å°ä¼™ä¼´ä»¬è·Ÿä¸Šè¿™æ³¢æ›´æ–°å§ã€‚åŽé¢æˆ‘ä¹Ÿå¸Œæœ›å¤šå°è¯•JDKæ–°çš„å¼€å‘ç‰¹æ€§ã€‚ ä½ çš„æ„Ÿè§‰å‘¢ï¼Ÿ å‚è€ƒç½‘ç«™ infoq]]></content>
      <categories>
        <category>tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Restart]]></title>
    <url>%2F2018%2F09%2F26%2Fnote%2F</url>
    <content type="text"><![CDATA[å°è¯•é‡æ–°å¼€å§‹å°è¯•é‡å¯è¿™ä¸ªblogï¼Œå› ä¸ºæœ‰è¶Šæ¥è¶Šå¤šçš„æ–‡å­—éœ€è¦è®°å½•ï¼Œä¹Ÿæƒ³åˆ†äº«ï¼Œè€Œåœ¨githubä¸Šçš„README.mdæ–‡ä»¶ä¸­å†™åˆæ˜¾ç„¶ä¸åˆé€‚ã€‚æ‰€ä»¥é‡æ–°å¯ç”¨è¿™ä¸ªå·¥ç¨‹å¼€å§‹æ•´ç†è‡ªå·±çš„éšç¬”ã€‚ åŒæ—¶ï¼Œå‡ ä¸ªæœˆå‰å¼€å§‹æ›´æ–°è‡ªå·±çš„githubå·¥ç¨‹ï¼Œä¸»è¦å›´ç»•ä¸‰ä¸ªé¡¹ç›®ï¼š Java Tech Javaç›¸å…³æŠ€æœ¯ Python Tech Pythonç›¸å…³æŠ€æœ¯ CICD Tech CI/CD DEV/OPSç›¸å…³æŠ€æœ¯ ç»´æŠ¤è¿™ä¸‰ä¸ªå·¥ç¨‹ä¸»è¦ç›®çš„åœ¨äºŽï¼š å¸®åŠ©è‡ªå·±æ€»ç»“æ‰€å­¦ï¼Œæ—¶é—´é•¿äº†å¾ˆå®¹å·²å¿˜è®° æœ¬äººä½¿ç”¨çš„æŠ€æœ¯ç»å¤§éƒ¨åˆ†æœ¬æ¥å°±æ˜¯å…¬å¼€çš„ï¼Œä¹Ÿå¸Œæœ›ä»ŠåŽå¯ä»¥å¸®åˆ°å…¶ä»–äººã€‚ æ‰€ä»¥åœ¨æ‰€æœ‰é¡¹ç›®æˆ–è€…ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘å°½å¯èƒ½è¯´æ˜Žè¯¦ç»†ï¼Œå¹¶ç»™å‡ºæˆ‘æ‰€å¼•ç”¨çš„åŽŸåœ°å€è€Œè¿˜æ˜¯æœ‰å¾ˆå¤šæ€è·¯ä¸Šçš„å†…å®¹éœ€è¦è®°å½•ä¸‹æ¥ï¼Œæ‰€ä»¥æƒ³åœ¨è¿™é‡Œè®°å½•ï¼Œæ­¤blogä¹Ÿå°†å›´ç»•æˆ‘çš„æŠ€æœ¯é¢†åŸŸå±•å¼€ã€‚ ä¸ºä½•é‡æ–°å¼€å§‹ä½œä¸ºè®¡ç®—æœºå¼€å‘å·¥ç¨‹å¸ˆï¼Œæœ¬äººç¦»å´å†›è€å¸ˆæ‰€å®šä¹‰çš„å››çº§å·¥ç¨‹å¸ˆæ°´å¹³ï¼ˆè¯¦è§è°·æ­Œæ¥ä¿¡ä¸­çš„å®šä¹‰ï¼‰è¿˜æœ‰ä¸å°‘å·®è·ï¼Œè€Œæˆ‘å¸Œæœ›å¯ä»¥åšåˆ°ã€‚å”¯ä¸€çš„æ–¹æ³•æ˜¯ä¸æ–­ç§¯ç´¯ã€‚è¿™é‡Œçš„é‡æ–°å¼€å§‹æ˜¯ç»™è‡ªå·±è®¾å®šäº†ä¸€ä¸ªç›®æ ‡ï¼Œä¸€ä¸ªæ”¹å˜è‡ªå·±çš„ç›®æ ‡ï¼Œé‡æ–°å¼€å§‹å‘æ–°çš„ç›®æ ‡å‰è¿›ã€‚ ç¥æ‰€æœ‰å·¥ç¨‹å¸ˆå¥½è¿ï¼]]></content>
      <categories>
        <category>note</category>
      </categories>
      <tags>
        <tag>others</tag>
      </tags>
  </entry>
</search>
